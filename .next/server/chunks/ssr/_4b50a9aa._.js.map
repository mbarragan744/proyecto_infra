{"version":3,"sources":["../../../../components/add-to-cart-button.tsx"],"sourcesContent":["\"use client\"\n\nimport { ShoppingCart } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport type { Product } from \"@/lib/types\"\nimport { toast } from \"@/hooks/use-toast\"\nimport { mutate } from \"swr\"\nimport { useRouter } from \"next/navigation\"\n\ninterface AddToCartButtonProps {\n  product: Product\n}\n\nexport function AddToCartButton({ product }: AddToCartButtonProps) {\n  const router = useRouter()\n\n  const handleAddToCart = async () => {\n    try {\n      const res = await fetch(\"/api/cart\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ productId: product.id, quantity: 1 }),\n      })\n\n      if (!res.ok) {\n        const data = await res.json()\n        if (res.status === 401) {\n          toast({\n            title: \"Login required\",\n            description: \"Please login to add items to cart\",\n            variant: \"destructive\",\n          })\n          router.push(\"/login\")\n          return\n        }\n        throw new Error(data.error || \"Failed to add to cart\")\n      }\n\n      mutate(\"/api/cart\")\n      toast({\n        title: \"Added to cart\",\n        description: `${product.name} has been added to your cart`,\n      })\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to add to cart\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  return (\n    <Button className=\"w-full\" size=\"lg\" onClick={handleAddToCart} disabled={product.stock === 0}>\n      <ShoppingCart className=\"mr-2 h-5 w-5\" />\n      {product.stock === 0 ? \"Out of Stock\" : \"Add to Cart\"}\n    </Button>\n  )\n}\n"],"names":[],"mappings":"yHAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAMO,SAAS,EAAgB,SAAE,CAAO,CAAwB,EAC/D,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAElB,EAAkB,UACtB,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,YAAa,CACnC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,UAAW,EAAQ,EAAE,CAAE,SAAU,CAAE,EAC5D,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAmB,MAAf,EAAI,MAAM,CAAU,CACtB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,iBACP,YAAa,oCACb,QAAS,aACX,GACA,EAAO,IAAI,CAAC,UACZ,MACF,CACA,MAAM,AAAI,MAAM,EAAK,KAAK,EAAI,wBAChC,CAEA,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,aACP,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,gBACP,YAAa,CAAA,EAAG,EAAQ,IAAI,CAAC,4BAA4B,CAC3D,AAD4D,EAE9D,CAAE,MAAO,EAAO,CACd,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,QACP,YAAa,aAAiB,MAAQ,EAAM,OAAO,CAAG,wBACtD,QAAS,aACX,EACF,CACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,SAAS,KAAK,KAAK,QAAS,EAAiB,SAA4B,IAAlB,EAAQ,KAAK,WACpF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,iBACL,IAAlB,EAAQ,KAAK,CAAS,eAAiB,gBAG9C"}