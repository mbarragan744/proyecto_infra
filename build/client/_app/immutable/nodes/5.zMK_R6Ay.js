import{f,a as n,t as pe,s as x,c as $e,d as ke}from"../chunks/BMgd0Fyj.js";import{p as _e,w as Pe,C as Ne,D as k,E as Ee,f as ge,s as e,c as r,g as a,r as t,F as d,n as fe,t as te,a as xe,u as ye}from"../chunks/CjCuP7Dm.js";import{i as P,a as Ue,c as Te}from"../chunks/CClzeexG.js";import{a as F,B as me,r as y,f as De}from"../chunks/Cby4HzBB.js";import{C as he,b as $}from"../chunks/gALCuKYq.js";var Se=f('<div class="mb-4 p-3 bg-green-100 text-green-800 rounded-md"> </div>'),je=f('<div class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2" for="name">Nombre</label> <input type="text" id="name" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div><label class="block text-sm font-medium mb-2" for="email">Email</label> <input type="email" disabled id="email" class="w-full px-3 py-2 border border-input rounded-md bg-muted text-muted-foreground cursor-not-allowed"/></div> <div><label class="block text-sm font-medium mb-2" for="phone">Teléfono</label> <input type="tel" id="phone" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div><label class="block text-sm font-medium mb-2" for="country">País</label> <input type="text" id="country" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div><label class="block text-sm font-medium mb-2" for="city">Ciudad</label> <input type="text" id="city" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div><label class="block text-sm font-medium mb-2" for="postalCode">Código Postal</label> <input type="text" id="postalCode" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div></div> <div><label class="block text-sm font-medium mb-2" for="address">Dirección</label> <input type="text" id="address" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div class="flex gap-3 justify-end"><!> <!></div></div>'),Be=f('<div class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="text-sm text-muted-foreground" for="name">Nombre</label> <p class="text-lg font-medium" id="name"> </p></div> <div><label class="text-sm text-muted-foreground" for="email">Email</label> <p class="text-lg font-medium" id="email"> </p></div> <div><label class="text-sm text-muted-foreground" for="phone">Teléfono</label> <p class="text-lg font-medium" id="phone"> </p></div> <div><label class="text-sm text-muted-foreground" for="country">País</label> <p class="text-lg font-medium" id="country"> </p></div> <div><label class="text-sm text-muted-foreground" for="city">Ciudad</label> <p class="text-lg font-medium" id="city"> </p></div> <div><label class="text-sm text-muted-foreground" for="postalCode">Código Postal</label> <p class="text-lg font-medium" id="postalCode"> </p></div></div> <div><label class="text-sm text-muted-foreground" for="address">Dirección</label> <p class="text-lg font-medium" id="address"> </p></div></div>'),Ie=f('<p class="text-muted-foreground">Por favor inicia sesión para ver tu perfil</p>'),Le=f('<div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold">Mi Perfil</h2> <!></div> <!> <!>',1);function Me(G,V){_e(V,!0);const c=()=>Ue(g,"$user",b),[b,h]=Te(),{subscribe:m,set:w}=Pe(!1),{subscribe:q,update:H}=F,g=Ne(q,N=>N);let o=k(!1),s=k(Ee({name:"",phone:"",address:"",city:"",postalCode:"",country:""})),_=k("");function j(){be({name:a(s).name,phone:a(s).phone,address:a(s).address,city:a(s).city,postalCode:a(s).postalCode,country:a(s).country})}function B(){d(s,{...g},!0),d(o,!1)}function be(N){H(se=>(d(s,{...se,...N},!0),d(_,"Perfil actualizado exitosamente"),d(o,!1),setTimeout(()=>{d(_,"")},3e3),a(s)))}he(G,{class:"p-6",children:(N,se)=>{var oe=Le(),i=ge(oe),p=e(r(i),2);{var C=v=>{me(v,{onclick:()=>d(o,!0),class:"bg-accent",children:(l,Q)=>{fe();var R=pe("Editar Perfil");n(l,R)},$$slots:{default:!0}})};P(p,v=>{a(o)||v(C)})}t(i);var J=e(i,2);{var K=v=>{var l=Se(),Q=r(l,!0);t(l),te(()=>x(Q,a(_))),n(v,l)};P(J,v=>{a(_)&&v(K)})}var de=e(J,2);{var O=v=>{var l=$e(),Q=ge(l);{var R=I=>{var E=je(),U=r(E),T=r(U),W=e(r(T),2);y(W),t(T);var X=e(T,2),L=e(r(X),2);y(L),t(X);var M=e(X,2),le=e(r(M),2);y(le),t(M);var D=e(M,2),Y=e(r(D),2);y(Y),t(D);var Z=e(D,2),z=e(r(Z),2);y(z),t(Z);var ee=e(Z,2),ne=e(r(ee),2);y(ne),t(ee),t(U);var S=e(U,2),ae=e(r(S),2);y(ae),t(S);var ce=e(S,2),re=r(ce);me(re,{onclick:B,class:"bg-muted text-foreground hover:bg-muted/80",children:(u,ve)=>{fe();var A=pe("Cancelar");n(u,A)},$$slots:{default:!0}});var ue=e(re,2);me(ue,{onclick:j,class:"bg-accent",children:(u,ve)=>{fe();var A=pe("Guardar Cambios");n(u,A)},$$slots:{default:!0}}),t(ce),t(E),te(()=>De(L,c().email)),$(W,()=>a(s).name,u=>a(s).name=u),$(le,()=>a(s).phone,u=>a(s).phone=u),$(Y,()=>a(s).country,u=>a(s).country=u),$(z,()=>a(s).city,u=>a(s).city=u),$(ne,()=>a(s).postalCode,u=>a(s).postalCode=u),$(ae,()=>a(s).address,u=>a(s).address=u),n(I,E)},we=I=>{var E=Be(),U=r(E),T=r(U),W=e(r(T),2),X=r(W,!0);t(W),t(T);var L=e(T,2),M=e(r(L),2),le=r(M,!0);t(M),t(L);var D=e(L,2),Y=e(r(D),2),Z=r(Y,!0);t(Y),t(D);var z=e(D,2),ee=e(r(z),2),ne=r(ee,!0);t(ee),t(z);var S=e(z,2),ae=e(r(S),2),ce=r(ae,!0);t(ae),t(S);var re=e(S,2),ue=e(r(re),2),u=r(ue,!0);t(ue),t(re),t(U);var ve=e(U,2),A=e(r(ve),2),Ce=r(A,!0);t(A),t(ve),t(E),te(()=>{x(X,c().name),x(le,c().email),x(Z,c().phone||"No especificado"),x(ne,c().country||"No especificado"),x(ce,c().city||"No especificado"),x(u,c().postalCode||"No especificado"),x(Ce,c().address||"No especificada")}),n(I,E)};P(Q,I=>{a(o)?I(R):I(we,!1)})}n(v,l)},ie=v=>{var l=Ie();n(v,l)};P(de,v=>{c()?v(O):v(ie,!1)})}n(N,oe)},$$slots:{default:!0}}),xe(),h()}var ze=f('<div class="mb-4 p-3 bg-destructive/10 text-destructive rounded-md"> </div>'),Ae=f('<div class="mb-4 p-3 bg-green-100 text-green-800 rounded-md"> </div>'),Fe=f('<div class="space-y-4 max-w-md"><div><label for="current-password" class="block text-sm font-medium mb-2">Contraseña Actual</label> <input id="current-password" type="password" placeholder="Ingresa tu contraseña actual" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div><label for="new-password" class="block text-sm font-medium mb-2">Nueva Contraseña</label> <input id="new-password" type="password" placeholder="Ingresa tu nueva contraseña" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <div><label for="confirm-password" class="block text-sm font-medium mb-2">Confirmar Nueva Contraseña</label> <input id="confirm-password" type="password" placeholder="Confirma tu nueva contraseña" class="w-full px-3 py-2 border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-accent"/></div> <!></div>'),Ge=f('<p class="text-muted-foreground">Por favor inicia sesión para cambiar tu contraseña</p>'),Ve=f('<h2 class="text-2xl font-bold mb-6">Cambiar Contraseña</h2> <!> <!> <!>',1);function qe(G,V){_e(V,!0);let c=k(""),b=k(""),h=k(""),m=k(""),w=k(""),q=ye(()=>{let g=null;return F.subscribe(o=>{g=o}),g});function H(){if(d(m,""),d(w,""),!a(c)||!a(b)||!a(h)){d(m,"Por favor completa todos los campos");return}if(a(b)!==a(h)){d(m,"Las contraseñas nuevas no coinciden");return}if(F.changePassword(a(c),a(b)))d(w,"Contraseña cambiada exitosamente"),d(c,""),d(b,""),d(h,""),setTimeout(()=>{d(w,"")},3e3);else{let o="";F.subscribeError(s=>{s&&(o=s.message)}),d(m,o||"Error al cambiar la contraseña",!0)}}he(G,{class:"p-6",children:(g,o)=>{var s=Ve(),_=e(ge(s),2);{var j=i=>{var p=ze(),C=r(p,!0);t(p),te(()=>x(C,a(m))),n(i,p)};P(_,i=>{a(m)&&i(j)})}var B=e(_,2);{var be=i=>{var p=Ae(),C=r(p,!0);t(p),te(()=>x(C,a(w))),n(i,p)};P(B,i=>{a(w)&&i(be)})}var N=e(B,2);{var se=i=>{var p=Fe(),C=r(p),J=e(r(C),2);y(J),t(C);var K=e(C,2),de=e(r(K),2);y(de),t(K);var O=e(K,2),ie=e(r(O),2);y(ie),t(O);var v=e(O,2);me(v,{onclick:H,class:"w-full bg-accent",children:(l,Q)=>{fe();var R=pe("Cambiar Contraseña");n(l,R)},$$slots:{default:!0}}),t(p),$(J,()=>a(c),l=>d(c,l)),$(de,()=>a(b),l=>d(b,l)),$(ie,()=>a(h),l=>d(h,l)),n(i,p)},oe=i=>{var p=Ge();n(i,p)};P(N,i=>{a(q)?i(se):i(oe,!1)})}n(g,s)},$$slots:{default:!0}}),xe()}var He=f('<div class="space-y-6"><!> <!> <button class="w-full px-4 py-3 bg-destructive text-destructive-foreground rounded-md hover:opacity-90 transition-opacity font-medium">Cerrar Sesión</button></div>'),Je=f('<div class="text-center py-12"><p class="text-lg text-muted-foreground mb-4">No has iniciado sesión</p> <a href="/" class="text-accent hover:underline">Volver a inicio</a></div>'),Ke=f('<main class="min-h-screen bg-background p-4"><div class="max-w-2xl mx-auto py-8"><!></div></main>');function Ye(G,V){_e(V,!0);let c=ye(()=>{let o=null;return F.subscribe(s=>{o=s}),o}),b=k(!1);function h(){F.logout(),d(b,!0),window.location.href="/"}var m=Ke(),w=r(m),q=r(w);{var H=o=>{var s=He(),_=r(s);Me(_,{});var j=e(_,2);qe(j,{});var B=e(j,2);B.__click=h,t(s),n(o,s)},g=o=>{var s=Je();n(o,s)};P(q,o=>{a(c)?o(H):o(g,!1)})}t(w),t(m),n(G,m),xe()}ke(["click"]);export{Ye as component};
