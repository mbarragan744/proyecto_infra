{"version":3,"file":"_server.ts-L7d2Y9ky.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/auth/register/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nconst POST = async ({ request }) => {\n  const { email, name, password } = await request.json();\n  if (!email || !name || !password) {\n    return json({ error: \"Todos los campos son requeridos\" }, { status: 400 });\n  }\n  if (password.length < 6) {\n    return json({ error: \"La contraseña debe tener al menos 6 caracteres\" }, { status: 400 });\n  }\n  try {\n    const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\n    if (users.some((u) => u.email === email)) {\n      return json({ error: \"Este email ya está registrado\" }, { status: 409 });\n    }\n    const newUser = {\n      id: Math.random().toString(36).substr(2, 9),\n      email,\n      name,\n      password,\n      phone: \"\",\n      address: \"\",\n      city: \"\",\n      postalCode: \"\",\n      country: \"\",\n      role: \"customer\",\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    };\n    users.push(newUser);\n    localStorage.setItem(\"users\", JSON.stringify(users));\n    const { password: _, ...userWithoutPassword } = newUser;\n    return json({ message: \"Usuario registrado exitosamente\", user: userWithoutPassword }, { status: 201 });\n  } catch (error) {\n    return json({ error: \"Error al registrar usuario\" }, { status: 500 });\n  }\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;AACK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACxD,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;AACpC,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,iCAAiC,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC9E,EAAE;AACF,EAAE,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AAC3B,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,gDAAgD,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC7F,EAAE;AACF,EAAE,IAAI;AACN,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC;AACnE,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;AAC9C,MAAM,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,+BAA+B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC9E,IAAI;AACJ,IAAI,MAAM,OAAO,GAAG;AACpB,MAAM,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;AACjD,MAAM,KAAK;AACX,MAAM,IAAI;AACV,MAAM,QAAQ;AACd,MAAM,KAAK,EAAE,EAAE;AACf,MAAM,OAAO,EAAE,EAAE;AACjB,MAAM,IAAI,EAAE,EAAE;AACd,MAAM,UAAU,EAAE,EAAE;AACpB,MAAM,OAAO,EAAE,EAAE;AACjB,MAAM,IAAI,EAAE,UAAU;AACtB,MAAM,SAAS,EAAE,iBAAiB,IAAI,IAAI,EAAE,EAAE,WAAW;AACzD,KAAK;AACL,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;AACvB,IAAI,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AACxD,IAAI,MAAM,EAAE,QAAQ,EAAE,CAAC,EAAE,GAAG,mBAAmB,EAAE,GAAG,OAAO;AAC3D,IAAI,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,iCAAiC,EAAE,IAAI,EAAE,mBAAmB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC3G,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,4BAA4B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACzE,EAAE;AACF;;;;"}